<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>lcb_observe</title><link rel="stylesheet" type="text/css" href="docbook-xsl.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /></head><body><div xml:lang="en" class="refentry" lang="en"><a id="idp158928"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>lcb_observe — get key information</p></div><div class="refsynopsisdiv"><a id="_synopsis"></a><h2>Synopsis</h2><p>cc [ flag … ] file… -lcouchbase [ library … ]</p><pre class="literallayout">#include &lt;libcouchbase/couchbase.h&gt;</pre><pre class="literallayout">lcb_error_t lcb_observe(lcb_t instance,
                        const void *command_cookie,
                        lcb_size_t num,
                        const lcb_observe_cmd_t *const *commands);</pre></div><div class="refsect1"><a id="_description"></a><h2>DESCRIPTION</h2><p>lcb_observe() is used to get information about a key from nodes in the
cluster. Typically, this will be used to get information about whether
or not a given document for a key has been persisted, but it may also
assist in determining if a specific key and CAS value for a document
are the same across multiple servers, indicating it has been replicated.
If the library instance is using asynchronous mode (the
default) this operation will return immediately and schedule the
operations to be executed by the event loop, otherwise it will block
until all commands are executed. command_cookie is is an opaque field
that will be provided to the callback function.  num is the number of
entries in the commands array.</p><p>lcb_observe_cmd_t is a structure defined in &lt;libcouchbase/arguments.h&gt;:</p><pre class="literallayout">typedef struct lcb_observe_cmd_t {
    int version;              /* The enty in "v" to use */
    union {
        struct {
             const void *key; /* The key to request information for */
             lcb_size_t nkey; /* Lenght of the key */
             const void *hashkey; /* Key used to locate server (if !NULL) */
             lcb_size_t nhashkey; /* length of hash key */
        } v0;
    } v;
};</pre><p>Upon completion the observe callback as set by
<a class="ulink" href="lcb_set_observe_callback.3couchbase.html" target="_top">lcb_set_observe_callback(3couchbase)</a> is called.  The callback is
called multiple times. See <a class="ulink" href="lcb_set_observe_callback.3couchbase.html" target="_top">lcb_set_observe_callback(3couchbase)</a> for
more information about observe callbacks.</p></div><div class="refsect1"><a id="_return_values"></a><h2>RETURN VALUES</h2><p>lcb_version() returns the LCB_SUCCESS on success, or a specific error
code upon failure. See <a class="ulink" href="lcb_strerror.3couchbase.html" target="_top">lcb_strerror(3couchbase)</a> for more information.</p></div><div class="refsect1"><a id="_examples"></a><h2>EXAMPLES</h2><pre class="literallayout">#include &lt;libcouchbase/couchbase.h&gt;</pre><pre class="literallayout">...
lcb_t instance;
...
lcb_observe_cmd_t *observe = calloc(1, sizeof(*observe));
observe-&gt;version = 0;
observe-&gt;v.v0.key = "my-key";
observe-&gt;v.v0.nkey = strlen(observe-&gt;v.v0.key);
lcb_observe_cmd_t* commands[] = { observe };
lcb_observe(instance, NULL, 1, commands);
...</pre></div><div class="refsect1"><a id="_attributes"></a><h2>ATTRIBUTES</h2><p>See <a class="ulink" href="lcb_attributes.5.html" target="_top">lcb_attributes(5)</a> for descriptions of the following attributes:</p><div class="informaltable"><table cellpadding="4px" style="border-collapse: collapse;border-top: 3px solid #527bbd; border-bottom: 3px solid #527bbd; border-left: 3px solid #527bbd; border-right: 3px solid #527bbd; "><colgroup><col class="col_1" /><col class="col_2" /></colgroup><thead><tr><th style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"> ATTRIBUTE TYPE      </th><th style="border-bottom: 1px solid #527bbd; " align="left" valign="top"> ATTRIBUTE VALUE</th></tr></thead><tbody><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Interface Stability</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Committed</p></td></tr><tr><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>MT-Level</p></td><td style="" align="left" valign="top"><p>MT-Safe</p></td></tr></tbody></table></div></div><div class="refsect1"><a id="_see_also"></a><h2>SEE ALSO</h2><p>Copyright 2010-2013 Couchbase, Inc.</p><p>Learn more at <a class="ulink" href="http://www.couchbase.com/communities/c" target="_top">http://www.couchbase.com/communities/c</a>.</p><p><a class="ulink" href="libcouchbase.3lib.html" target="_top">libcouchbase(3lib)</a>, <a class="ulink" href="lcb_get_observe_callback.3couchbase.html" target="_top">lcb_get_observe_callback(3couchbase)</a>,
<a class="ulink" href="lcb_set_observe_callback.3couchbase.html" target="_top">lcb_set_observe_callback(3couchbase)</a>, <a class="ulink" href="lcb_attributes.5.html" target="_top">lcb_attributes(5)</a></p></div></div></body></html>
